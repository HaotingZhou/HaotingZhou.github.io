---
layout: default
---

{% include base_path %}

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% endif %}

<div id="main" role="main">
  <article class="splash" itemscope itemtype="http://schema.org/CreativeWork">
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.excerpt %}<meta itemprop="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.date %}<meta itemprop="datePublished" content="{{ page.date | date: "%B %d, %Y" }}">{% endif %}
    {% if page.modified %}<meta itemprop="dateModified" content="{{ page.modified | date: "%B %d, %Y" }}">{% endif %}

    <section class="page__content" itemprop="text">
      {{ content }}
    </section>


    <!-- 🌍 Visitor Map Section -->
<h2 style="margin-top: 2em;">🌍 Visitor Map</h2>
<div id="visitor-map" style="height: 400px; border-radius: 10px; margin-bottom: 2em;"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  const map = L.map('visitor-map').setView([20, 0], 2);  // 初始世界视图

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  fetch('https://ipapi.co/json')
    .then(response => response.json())
    .then(data => {
      const lat = data.latitude;
      const lon = data.longitude;
      const city = data.city;
      const country = data.country_name;

      L.marker([lat, lon]).addTo(map)
        .bindPopup(`👋 You are visiting from <b>${city}, ${country}</b>`)
        .openPopup();

      map.setView([lat, lon], 6);
    })
    .catch(err => console.error("GeoIP fetch error:", err));
</script>

    
  </article>
</div>
